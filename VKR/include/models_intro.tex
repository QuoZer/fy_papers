\subsection{Исследование точности калибровочных моделей сверхширокоугольных объективов}

Так как классические методы стереозрения, требующие ректификации, всё ещё остаются самыми доступными и производительными \cite{disparity_review}, 
необходимо выбрать модель искажений, способную обеспечить систему наиболее точно восстановленными изображениями. 
Исходные данные сравниваемых моделей представлены в таблице \ref{tab:vit_models_params}.

\begin{table}[h!]
    
    \caption{Результаты калибровки}
    \label{tab:vit_models_params}
    \resizebox{\textwidth}{!}{%
    \begin{tabular}{|l|l|l|l|}
        \hline
    Модель         & ПО калибровки & \begin{tabular}[c]{@{}l@{}}Ошибка\\ калибровки\end{tabular}   & Параметры модели \\ \hline
    Мей            & CamOdoCal   & 0.102               & \begin{tabular}[c]{@{}l@{}} $  \xi=1.47431, p_1=0.000166, p_2=0.00008,$ \\ $k_1=-0.208916, k_2=0.153247 $                        \end{tabular}           \\ \hline
    Каннала-Брандт & CamOdoCal   & 0.099               & \begin{tabular}[c]{@{}l@{}} $  k_2=0.000757676, k_3=-0.000325907, k_4=0.0000403,$ \\ $k_5=-0.000001866, f_x=343.57, f_y=343.37$  \end{tabular}   \\ \hline
    Скарамузза     & MATLAB        & 0.121             & \begin{tabular}[c]{@{}l@{}} $  a_0=345.1319, a_1=-0.0011, a_2=5.7623 * 10^-7,$ \\$ a_3=-1.3985 * 10^-9 $                         \end{tabular}      \\ \hline
    \end{tabular} }
\end{table}

Результатом работы алгоритма стереозрения является карта глубины воспринимаемого пространства.  Точность работы 
стереокамер зависит от того, насколько точно эта карта глубины передаёт реальную информацию о расстоянии до поверхностей.
Оценить эту характеристику для отдельной стереопары проблематично, так как она зависит от множества факторов. Основными источниками
 ошибок при работе стереокамер можно считать \cite{kinect_perf}: 
\begin{itemize}
    \item сами сенсоры;
    \item условия измерений;
    \item свойства наблюдаемой поверхности;
\end{itemize}

Ошибки сенсоров возникают в первую очередь из-за неточного подбора параметров камеры и несовершенств оптики. Такие недостатки приводят
к неправильному устранению искажений и, следовательно, систематической ошибке в оценке координат точек в пространстве. Более 
качественная оптика и точная калибровка могут снизить влияние этих факторов.
Условия измерений включают в себя такие факторы как, например, освещённость - в условиях низкой освещённости или при прямом ярком свете системе работать сложнее.
Другими важными факторами являются расстояние до наблюдаемой поверхности и положение камер. Некоторые конфигурации камер и наблюдаемых объектов приводят к
заслонениям, которые не позволяют вычислить глубину. Увеличение расстояния между стереопарой и объектом же , как будет видно далее, приводит к увеличению ошибки.  
Наконец, сами поверхности, как уже упоминалось в главе \ref{stereovision}, должны быть ламбертовыми и обладать выраженной текстурой. 

Сравнение моделей производится в виртуальной среде, так как она позволяет устранить или контролировать указанные выше параметры. Камеры закреплены жёстко в 
известных координатах, целевая поверхность - плоскость, у которой нет затенённых участков, освещение равномерное, а эксперименты проводятся с 
применением разных по своим особенностям текстур. Таким образом, основными источниками ошибок в виртуальной системе стереозрения являются калибровочная модель 
камеры и расстояние до объекта. График, связывающий известное расстояние до объекта со среднеквадратичной ошибкой оценки этого расстояния будем использовать
для сравнения разных моделей между собой. 

Кроме описанных ранее моделей в сравнении  присутствует два эталона. Первый обозначен на графиках как ATAN и представляет из себя идеальную 
эквидистантную fisheye-проекцию, которая заложена в использованную виртуальную сверхширокоугольную камеру. Она добавлена к сравнению как 
эталонный способ устранения искажений из предположения, что с ней результаты стереосопоставления будут самыми лучшими среди всех иоделей. 
Использование её на реальных объективах ограничено, так как она не учитывает несовершенства реальных линз. 

Кроме того, виртуальная сцена Unity позволяет разместить сразу несколько объектов в одной точке пространства, таким образом возможно
в существующую модель добавить ещё 2 камеры, совпадающие по полю зрения и положению с виртуальными камерами-обскурами, использованными 
в исследуемой виртуальной стереопаре. Разрешение этих камер выбрано исходя из размеров проекции $\nu_i$ области интереса на широкоугольном
снимке. Для камер ''рыбий глаз'' с разрешением $1080*1080$ пикселей она составляет 287482 пикселей, что аналогично камере 
с разрешением $540*540$. Камеры полностью подчиняются перспективной проекции (\ref{eq:uv_to_xyz}) и не содержат каких либо оптических искажений.
 Далее эти камеры будут называться эталонными камерами, а стереопара, которую они составляют - эталонной стереопарой (обозначена на графиках как REF).
Её результаты должны демонстрировать ошибку, присущую системе при данных условиях. %% FIXME: 

Наиболее сильные искажения на изображении ''рыбий глаз'' возникают по краям изображения, там же чаще всего имеются пересечения полей зрения,
 поэтому исследуемая виртуальная стереопара построена так, чтобы угол между принципиальными осями камер составлял $90^\circ$. При этом объективы 
 камер имеют одинаковые параметры, поле зрения в $180^\circ$, а расстояние между ними составляет 20см. %Описанная конфигурация изображена на рисунке \ref{pic:2cam_scheme}.

% Здесь область пересечения полей зрения камер $C_0$ и $C_1$ обозначенная красным.
% Эта область эквивалентна области пересечения полей зрения двух камер с полями зрения $90^\circ$ (обозначены
% оранжевым), повёрнутых на $\beta_0 = \beta_1  = 45^\circ$ в сторону области интереса. Тогда $B$ - база стереопары.


\vspace{\baselineskip}
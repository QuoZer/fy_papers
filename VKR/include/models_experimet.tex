\subsection{Экспериментальное исследование моделей}
\label{model_exps}

С помощью этой стереопары были получены снимки калибровочного узора шахматной доски, 
которые потом  направлены в соответствующие программные пакеты для нахождения параметров каждой модели. 
Параметры моделей занесены в разработанную библиотеку для устранения искажений на снимках виртуальной 
плоскости на расстояниях от 1 до 10м с шагом 1м. 
Пример снимка после устранения искажений и снимка с соответствующей эталонной камеры показан на рисунке \ref{pic:2images_compar}.

\addtwoimghere{pic_fy}{0.4}{pic_reg}{0.4}{Слева - снимок после устранения искажений (модель Скарамуззы); справа - эталонное изображение}{pic:2images_compar}

Визуально снимки очень похожи, однако при более детальном рассмотрении на левом изображении заметна меньшая чёткость,
вероятно, связанная с интерполяцией пикселей в процессе проецирования. Также присутствуют малозаметные искажения геометрии. Более 
явно эти дефекты для разных моделей можно увидеть на разностном изображении, представленном на рисунке \ref{pic:difference}. 

\addimghere{diffs}{1}{Разностные изображения (резкость увеличена). Чем светлее участок, тем сильнее различия}{pic:difference}

Визуальный анализ этих изображений подтверждает наблюдения и показывает малозначительность отличий для большинства моделей. 
Это позволяет применять изображения, полученные описанным путём, в стереосопоставлении. 

Оценка качества оценки глубины произведена на основе измерения среднеквадратичного отклонения и дисперсии полученных точек 
глубины от их предполагаемой позиции. Виртуальность эксперимента позволяет точно знать положение исследуемого объекта и, соответственно, 
точно определять ошибку. Как уже упоминалось, эффективность стереосопоставления \cite{SGBM} зависит от текстуры наблюдаемого объекта, 
поэтому для устранения влияния этого фактора эксперименты были проведены с различными текстурами. Использованный алгоритм стереосопоставления
опирается на поиск отклика на участок одного изображения на эпиполярной линии другого. Таким образом, текстура с одинаковыми повторяющимися 
фрагментами может привести к ложным срабатываниям и карте глубины низкого качества. Поэтому в экспериментах использовались три текстуры: часто 
повторяющийся узор обоев; текстура, состоящая как из повторяющихся с разной частотой, так и из случайных элементов; и полностью неповторяющееся изображение.
Использованные текстуры приведены на рисунке \ref{pic:textures}. Графики в этом и следующем разделе отображают усреднённые результаты по всем текстурам, отдельные графики приведены в приложениях. 

\addimghere{pics/textures}{0.7}{Пример использованных текстур}{pic:textures}

По полученным картам глубины можно осуществить 3D-реконструкция сцены. Результата реконструкции представлен  в виде облака точек, 
 аналогичного изображённому на рисунке \ref{pic:raw_pointcloud}. По соответствующим этому снимку дистанциям строится модель целевой плоскости, 
 а точки за пределами её окрестности отбрасываются. Далее из оставшихся выбираются 1000 случайных точек, что позволяет считать ошибку с 
 одинаковой точностью для всех расстояний.  % FIXME: размеры окрестности и точно ли _точность_ одинаковая? 
Эти точки используются для вычисления ошибки. 

\addimghere{pointcloud}{0.7}{Неочищенное облако точек}{pic:raw_pointcloud}

Результаты оценки качества нахождения глубины приведены на рисунке \ref{pic:quality}. По оси абсцисс отложено расстояние до исследуемого объекта,
по оси ординат среднеквадратичное отклонение. На рисунке \ref{pic:mean} изображено зависимость матожидания дистанции до поверхности от расстояния 
до исследуемой плоскости и дисперсия точек.  Каждая ломанная соответствует своей модели и усреднена по всем текстурам.

\addimghere{pics/depth_quality}{1}{Точность построения карты глубины}{pic:quality}

\addimghere{pics/distance}{1}{Оценка дистанции до плоскости}{pic:mean}

Как можно заметить по графикам, наилучший результат в оценке глубины логичным образом показывает эталонная стереопара. Далее следует 
идеальная модель, заложенная в виртуальную камеру, демонстрируя, что даже в случае полного соответствие прямой и обратной проекций часть 
информации в изображении теряется или искажается. Из исследуемых моделей самую низкую ошибку демонстрирует модель Канналы-Брандта с результатом
0.06м на метр удаления, у других моделей ошибка выше и достигает до 0.1м на метр удаления. Кроме того заметно, что большинство моделей имеют тенденцию
к недооценке расстояния.  Дисперсия на максимальном расстоянии варьируется от $\pm 0.0096$ у эталонной стереопары и $\pm 0.0763$ у модели Канналы-Брандта 
до $\pm 0.393$ у модели Мея. % TODO: актуализировать



